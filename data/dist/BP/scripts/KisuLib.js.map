{
  "version": 3,
  "sources": ["../../../../lib/@kisu/api/src/class/ConfigManagers.ts", "../../../../lib/@kisu/api/src/class/EventHanlders.ts", "../../../../lib/@kisu/api/src/class/Logger.ts", "../../../../lib/@kisu/api/src/class/PluginBase.ts", "../../../../lib/@kisu/api/src/class/PlayerManagers.ts", "../../../../lib/@kisu/api/src/class/ItemActionManager.ts", "../../../../lib/@kisu/api/src/class/PluginManagers.ts", "../../../../lib/@kisu/api/src/class/SystemBase.ts", "../../../../lib/@kisu/api/src/plugins/SystemPlugin/index.ts", "../../../../lib/@kisu/api/src/class/SettingMenuBuilders.ts", "../../../../lib/@kisu/api/src/class/MinecraftColors.ts", "../../../../lib/@kisu/api/src/class/PluginEventHanlders.ts", "../../../../lib/@kisu/api/src/class/forms/IActionForm.ts", "../../../../lib/@kisu/api/src/class/forms/IMessageForm.ts", "../../../../lib/@kisu/api/src/class/forms/IModalForm.ts", "../../../../lib/@kisu/api/src/global/String.ts", "../../../../lib/@kisu/api/src/global/Player.ts"],
  "sourcesContent": ["import { world, World } from \"@minecraft/server\";\r\n\r\nclass ConfigManagers {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    public getConfig<T = unknown>(name: string): Config<T> {\r\n        return new Config<T>(name);\r\n    }\r\n\r\n    public clearAll() {\r\n        const properties = world.getDynamicPropertyIds();\r\n        for (const key of properties) {\r\n            if (key.startsWith(\"config.\")) {\r\n                world.setDynamicProperty(key);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass Config<T = unknown> {\r\n    private name: string;\r\n    private world: World;\r\n    private prefix: string;\r\n    private readonly maxChunkSize = 32767;\r\n\r\n    constructor(name: string) {\r\n        this.name = name;\r\n        this.world = world;\r\n        this.prefix = `config.${this.name}`;\r\n    }\r\n\r\n    set(value: T): void {\r\n        const serialized = JSON.stringify(value);\r\n\r\n        // Clear existing chunks before writing the new value\r\n        this.clear();\r\n\r\n        if (serialized.length <= this.maxChunkSize) {\r\n            this.world.setDynamicProperty(this.prefix, serialized);\r\n            return;\r\n        }\r\n\r\n        let partIndex = 0;\r\n        for (let offset = 0; offset < serialized.length; offset += this.maxChunkSize) {\r\n            const chunk = serialized.slice(offset, offset + this.maxChunkSize);\r\n            this.world.setDynamicProperty(`${this.prefix}.part${partIndex}`, chunk);\r\n            partIndex++;\r\n        }\r\n    }\r\n\r\n    get(): T {\r\n        const partPrefix = `${this.prefix}.part`;\r\n        const partKeys = this.world\r\n            .getDynamicPropertyIds()\r\n            .filter((id) => id.startsWith(partPrefix))\r\n            .sort((a, b) => {\r\n                const aIndex = Number(a.slice(partPrefix.length));\r\n                const bIndex = Number(b.slice(partPrefix.length));\r\n                return aIndex - bIndex;\r\n            });\r\n\r\n        let raw = this.world.getDynamicProperty(this.prefix) as string | undefined;\r\n\r\n        if (partKeys.length > 0) {\r\n            const parts: string[] = [];\r\n            for (const key of partKeys) {\r\n                const chunk = this.world.getDynamicProperty(key) as string | undefined;\r\n                if (chunk) parts.push(chunk);\r\n            }\r\n            raw = parts.join(\"\");\r\n        }\r\n\r\n        if (!raw) return {} as T;\r\n        return JSON.parse(raw) as T;\r\n    }\r\n\r\n    delete(): void {\r\n        this.clear();\r\n    }\r\n\r\n    has(key: keyof T): boolean {\r\n        const data = this.get();\r\n        return data[key] !== undefined;\r\n    }\r\n\r\n    clear(): void {\r\n        const partPrefix = `${this.prefix}.part`;\r\n        const keys = this.world\r\n            .getDynamicPropertyIds()\r\n            .filter((id) => id === this.prefix || id.startsWith(partPrefix));\r\n\r\n        for (const key of keys) {\r\n            this.world.setDynamicProperty(key);\r\n        }\r\n    }\r\n}\r\n\r\nexport { ConfigManagers, Config };", "import { PluginBase } from \"@kisu/api\";\r\nimport { system } from \"@minecraft/server\";\r\n\r\ntype Callback<T> = (payload: T) => void;\r\ntype Listener = { owner?: PluginBase; cb: Callback<unknown> };\r\n\r\nexport class EventHandlers<AutoEvents extends Record<string, unknown>> {\r\n  private autoListeners = new Map<keyof AutoEvents, Listener[]>();\r\n  private customListeners = new Map<string, Listener[]>();\r\n  private onSubscribe?: (event: string) => void;\r\n  private onUnsubscribe?: (event: string) => void;\r\n\r\n  /** Set callbacks for dynamic subscription management */\r\n  public setSubscriptionHandlers(\r\n    onSubscribe: (event: string) => void,\r\n    onUnsubscribe: (event: string) => void\r\n  ): void {\r\n    this.onSubscribe = onSubscribe;\r\n    this.onUnsubscribe = onUnsubscribe;\r\n  }\r\n\r\n  /** Check if an event has any listeners */\r\n  public hasListeners(event: string): boolean {\r\n    const listeners = this.getListenerMap(event);\r\n    const list = listeners.get(event);\r\n    return list !== undefined && list.length > 0;\r\n  }\r\n\r\n  /** Subscribe to events */\r\n  public on<K extends keyof AutoEvents>(event: K, callback: Callback<AutoEvents[K]>): void;\r\n  public on<K extends `Custom${string}`, T>(event: K, callback: Callback<T>): void;\r\n  public on<K extends keyof AutoEvents>(owner: PluginBase, event: K, callback: Callback<AutoEvents[K]>): void;\r\n  public on(...args: unknown[]): void {\r\n    if (typeof args[0] === \"string\") {\r\n      this.addListener(args[0], args[1] as Callback<unknown>);\r\n    } else {\r\n      this.addListener(args[1] as string, args[2] as Callback<unknown>, args[0] as PluginBase);\r\n    }\r\n  }\r\n\r\n  private addListener(event: string, callback: Callback<unknown>, owner?: PluginBase): void {\r\n    const listeners = this.getListenerMap(event);\r\n    const hadListeners = this.hasListeners(event);\r\n    \r\n    const list = listeners.get(event) ?? [];\r\n    list.push({ owner, cb: callback });\r\n    listeners.set(event, list);\r\n\r\n    // Subscribe to event if this is the first listener\r\n    if (!hadListeners && this.onSubscribe && !event.startsWith(\"Custom\")) {\r\n      this.onSubscribe(event);\r\n    }\r\n  }\r\n\r\n  /** Unsubscribe */\r\n  public off<K extends keyof AutoEvents | `Custom${string}`>(event: K, callback: Callback<unknown>): void;\r\n  public off(owner: PluginBase, event: string, callback?: Callback<unknown>): void;\r\n  public off(...args: unknown[]): void {\r\n    if (typeof args[0] === \"string\") {\r\n      this.removeListener(args[0], undefined, args[1] as Callback<unknown>);\r\n    } else {\r\n      this.removeListener(args[1] as string, args[0] as PluginBase, args[2] as Callback<unknown> | undefined);\r\n    }\r\n  }\r\n\r\n  private removeListener(event: string, owner?: PluginBase, callback?: Callback<unknown>): void {\r\n    const listeners = this.getListenerMap(event);\r\n    const list = listeners.get(event);\r\n    if (!list) return;\r\n\r\n    const keep: Listener[] = [];\r\n    list.forEach((l) => {\r\n      const ownedMatch = owner && l.owner === owner;\r\n      const cbMatch = callback && l.cb === callback;\r\n\r\n      if (ownedMatch || cbMatch) {\r\n        return;\r\n      }\r\n\r\n      keep.push(l);\r\n    });\r\n\r\n    listeners.set(event, keep);\r\n\r\n    // Unsubscribe from event if no listeners remain\r\n    if (keep.length === 0 && this.onUnsubscribe && !event.startsWith(\"Custom\")) {\r\n      system.run(() => this.onUnsubscribe!(event));\r\n    }\r\n  }\r\n\r\n  /** Emit */\r\n  public emit<K extends keyof AutoEvents>(event: K, payload: AutoEvents[K]): void;\r\n  public emit<K extends `Custom${string}`, T>(event: K, payload: T): void;\r\n  public emit(event: string, payload: unknown): void {\r\n    const listeners = this.getListenerMap(event);\r\n    const list = listeners.get(event);\r\n    if (!list) return;\r\n\r\n    for (const listener of list) {\r\n      this.executeListener(listener, payload);\r\n    }\r\n  }\r\n\r\n  private executeListener(listener: Listener, payload: unknown): void {\r\n    try {\r\n      listener.cb(payload);\r\n    } catch {\r\n      // Swallow listener errors to avoid breaking emit loop\r\n    }\r\n  }\r\n\r\n  public suspendPlugin(owner: PluginBase): Map<string, Callback<unknown>[]> {\r\n    const stored = new Map<string, Callback<unknown>[]>();\r\n\r\n    const collect = (listeners: Map<string, Listener[]>) => {\r\n      for (const [event, list] of listeners.entries()) {\r\n        const owned = list.filter((listener) => listener.owner === owner);\r\n        if (owned.length === 0) continue;\r\n\r\n        stored.set(event as string, owned.map((listener) => listener.cb));\r\n        this.removeListener(event as string, owner);\r\n      }\r\n    };\r\n\r\n    collect(this.autoListeners as Map<string, Listener[]>);\r\n    collect(this.customListeners);\r\n\r\n    return stored;\r\n  }\r\n\r\n  public resumePlugin(owner: PluginBase, listeners: Map<string, Callback<unknown>[]>): void {\r\n    for (const [event, callbacks] of listeners.entries()) {\r\n      for (const cb of callbacks) {\r\n        this.addListener(event, cb, owner);\r\n      }\r\n    }\r\n  }\r\n\r\n  private getListenerMap(event: string): Map<string, Listener[]> {\r\n    return event.startsWith(\"Custom\") ? this.customListeners : this.autoListeners as Map<string, Listener[]>;\r\n  }\r\n}\r\n", "class Logger {\r\n    private prefix: string;\r\n\r\n    constructor(prefix: string) {\r\n        this.prefix = prefix;\r\n    }\r\n\r\n    public log(message: string): void {\r\n        this.msg(message, \"LOG\");\r\n    }\r\n\r\n    public error(message: string): void {\r\n        this.msg(message, \"ERROR\");\r\n    }\r\n\r\n    public warn(message: string): void {\r\n        this.msg(message, \"WARN\");\r\n    }\r\n\r\n    public info(message: string): void {\r\n        this.msg(message, \"INFO\");\r\n    }\r\n\r\n    public debug(message: string): void {\r\n        this.msg(message, \"DEBUG\");\r\n    }\r\n\r\n    private msg(message: string, type: string) {\r\n        console.warn(`[${this.prefix}][${type}] ${message}`);\r\n    }\r\n}\r\n\r\nexport { Logger };", "import {\r\n  ShutdownEvent,\r\n  StartupEvent,\r\n  System,\r\n  system,\r\n  World,\r\n  world\r\n} from \"@minecraft/server\";\r\nimport {\r\n  Config,\r\n  EventHandlers,\r\n  Logger,\r\n  PluginEventHandlers,\r\n  type PluginSettingOptions,\r\n  SettingMenu,\r\n  SystemBase,\r\n  type WorldEvents,\r\n} from \"@kisu/api\";\r\nimport { PlayerManagers } from \"./PlayerManagers.ts\";\r\nimport { ItemActionManager } from \"./ItemActionManager.ts\";\r\n\r\nclass PluginBase {\r\n  public isLoaded: boolean = false;\r\n  public events: PluginEventHandlers;\r\n  public name: string = \"PluginBase\";\r\n  public version: string = \"1.0.0\";\r\n  public icon: string = \"\"\r\n  public world: World;\r\n  public system: System;\r\n  public systemBase: SystemBase;\r\n  public settingMenu: SettingMenu;\r\n  public playerManagers: PlayerManagers;\r\n  public itemActionManager: ItemActionManager;\r\n  public isRuntime: boolean = false;\r\n\r\n  constructor(events: EventHandlers<WorldEvents>, systemBase: SystemBase) {\r\n    this.events = new PluginEventHandlers(this, events);\r\n    this.world = world;\r\n    this.system = system;\r\n    this.systemBase = systemBase;\r\n    this.settingMenu = new SettingMenu(this, this.getPluginSettings());\r\n    this.playerManagers = new PlayerManagers();\r\n    this.itemActionManager = new ItemActionManager(this);\r\n    this.system.run(() => {\r\n      if (!this.isEnabled()) return;\r\n      this.systemBase.pluginManagers.applyPluginState(this);\r\n      this.load();\r\n    });\r\n  }\r\n\r\n  get config(): Config<PluginSettingOptions> {\r\n    return this.systemBase.configManager.getConfig(this.name)!;\r\n  }\r\n\r\n  get logger() {\r\n    return new Logger(this.name.toUpperCase());\r\n  }\r\n\r\n  public load() {\r\n    this.initializeConfig();\r\n    this.onLoad();\r\n    this.isLoaded = true;\r\n  }\r\n\r\n  public getName(): string {\r\n    return this.name;\r\n  }\r\n\r\n  public onEnable(_ev: StartupEvent): void {\r\n  }\r\n\r\n  public onLoad(): void {\r\n  }\r\n\r\n  public onDisable(_ev: ShutdownEvent): void {\r\n  }\r\n\r\n  public isEnabled(): boolean {\r\n    const config = this.config.get();\r\n    const enabledSetting = (config as PluginSettingOptions | undefined)?.[\"Enabled\"];\r\n\r\n    if (enabledSetting && \"value\" in enabledSetting) {\r\n      return Boolean(enabledSetting.value);\r\n    }\r\n\r\n    if (enabledSetting && \"default\" in enabledSetting) {\r\n      return Boolean(enabledSetting.default);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  public registerSettings(menu: typeof SettingMenu): void {\r\n    this.settingMenu = new menu(this, this.getPluginSettings());\r\n  }\r\n\r\n  public getPluginSettings(): PluginSettingOptions {\r\n    return {\r\n      [\"Enabled\"]: {\r\n        description: \"Toggle this plugin on or off.\",\r\n        type: \"boolean\",\r\n        default: true,\r\n      },\r\n      ...this.getSettings(),\r\n    };\r\n  }\r\n\r\n  public getSettings(): PluginSettingOptions {\r\n    return {};\r\n  }\r\n\r\n  public getAdvancedSettings(_pl: Player, _plugin: PluginBase): (() => void) | null {\r\n    return null;\r\n  }\r\n\r\n  private initializeConfig() {\r\n    let config = this.config.get();\r\n    if (!config) {\r\n      this.config.set({});\r\n      config = this.config.get()!;\r\n    }\r\n\r\n    const pluginSettings = this.getPluginSettings();\r\n    const configUnUsedKeys = Object.keys(config).filter(\r\n      (key) => !(key in pluginSettings),\r\n    );\r\n    for (const key of configUnUsedKeys) {\r\n      delete config[key];\r\n    }\r\n\r\n    for (const [key, setting] of Object.entries(pluginSettings)) {\r\n      if (!(key in config) || config[key]?.type !== setting.type || config[key]?.description !== setting.description || config[key]?.default !== setting.default) {\r\n        config[key] = { ...setting, value: config[key]?.value ?? setting.default };\r\n      }\r\n    }\r\n    this.config.set(config);\r\n  }\r\n}\r\n\r\nexport { PluginBase };\r\n", "import { GameMode, world } from \"@minecraft/server\";\r\nimport { Player } from \"@minecraft/server\";\r\n\r\nclass PlayerManagers {\r\n    constructor() {}\r\n\r\n    public eachPlayer(callback: (player: Player) => void) {\r\n        const players = this.getAllPlayers();\r\n        for (const player of players) {\r\n            callback(player);\r\n        }\r\n    }\r\n\r\n    public findPlayerByName(name: string): Player | null {\r\n        const players = this.getAllPlayers();\r\n        for (const player of players) {\r\n            if (player.name === name) {\r\n                return player;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    public countPlayers(): number {\r\n        const players = this.getAllPlayers();\r\n        return players.length;\r\n    }\r\n\r\n    public getAllPlayers(): Player[] {\r\n        return world.getPlayers();\r\n    }\r\n\r\n    public isPlayerGameMode(player: Player, gameMode: GameMode): boolean {\r\n        return player.getGameMode() === gameMode;\r\n    }\r\n}\r\n\r\nexport { PlayerManagers };", "import { Entity, ItemStack } from \"@minecraft/server\";\r\nimport { Player } from \"@minecraft/server\";\r\nimport { PluginBase } from \"./PluginBase.ts\";\r\n\r\nconst ItemActionRegistry = new Map<string, ItemActions>();\r\n\r\nclass ItemActionManager {\r\n    private plugin: PluginBase;\r\n    constructor(plugin: PluginBase) {\r\n        this.plugin = plugin;\r\n    }\r\n\r\n    public registerItem(itemId: string): ItemActions {\r\n        const itemActions = new ItemActions(itemId, this.plugin);\r\n        ItemActionRegistry.set(itemId, itemActions);\r\n        return itemActions;\r\n    }\r\n\r\n    public getItemActions(itemId: string): ItemActions | undefined {\r\n        return ItemActionRegistry.get(itemId);\r\n    }\r\n}\r\n\r\nclass ItemActions {\r\n    private itemId: string;\r\n    private plugin: PluginBase;\r\n    constructor(itemId: string, plugin: PluginBase) {\r\n        this.itemId = itemId;\r\n        this.plugin = plugin;\r\n    }\r\n\r\n    public onUse(callback: (player: Player, item: ItemStack) => void) {\r\n        this.plugin.events.on(\"AfterItemUse\", (ev) => {\r\n            if (ev.itemStack.typeId !== this.itemId) return;\r\n            callback(ev.source, ev.itemStack);\r\n        });\r\n    }\r\n\r\n    //WIP\r\n    public onHitEntity(callback: (player: Player, item: ItemStack, entity: Entity) => void) {\r\n        this.plugin.events.on(\"AfterEntityHurt\", (ev) => {\r\n            const player = ev.damageSource.damagingEntity as Player;\r\n            const items = player?.getComponent(\"inventory\")?.container.getItem(player.selectedSlotIndex);\r\n            if (!items) return;\r\n            callback(player, items, ev.hurtEntity);\r\n        });\r\n    }\r\n}\r\n\r\nexport { ItemActions, ItemActionManager };", "import { type WorldEvents, EventHandlers, PluginBase, SystemBase } from \"@kisu/api\";\r\nimport { system } from \"@minecraft/server\";\r\n\r\nclass PluginManagers {\r\n    private plugins: Map<string, PluginBase> = new Map();\r\n    private pausedListeners: Map<string, Map<string, ((payload: unknown) => void)[]>> = new Map();\r\n    private eventHandlers: EventHandlers<WorldEvents>;\r\n    private SystemBase: SystemBase;\r\n\r\n    constructor(event: EventHandlers<WorldEvents>, system: SystemBase) {\r\n        this.eventHandlers = event;\r\n        this.SystemBase = system;\r\n    }\r\n\r\n    public registerPlugin(...plugin: typeof PluginBase[]): void {\r\n        for (const p of plugin) {\r\n            const instance = new p(this.eventHandlers, this.SystemBase);\r\n            this.plugins.set(instance.name, instance);\r\n            system.run(() => this.applyPluginState(instance));\r\n        }\r\n    }\r\n\r\n    public getPlugin(name: string): PluginBase | null {\r\n        return this.plugins.get(name) || null;\r\n    }\r\n\r\n    public getPlugins(): PluginBase[] {\r\n        return Array.from(this.plugins.values());\r\n    }\r\n\r\n    public isEnabled(name: string): boolean {\r\n        const plugin = this.plugins.get(name);\r\n        if (!plugin) return false;\r\n\r\n        return plugin.isEnabled();\r\n    }\r\n\r\n    public applyPluginState(plugin: PluginBase): void {\r\n        if (plugin.isEnabled()) {\r\n            this.enablePlugin(plugin);\r\n            return;\r\n        }\r\n\r\n        this.disablePlugin(plugin);\r\n    }\r\n\r\n    public setPluginEnabled(name: string, enabled: boolean): void {\r\n        const plugin = this.plugins.get(name);\r\n        if (!plugin) return;\r\n\r\n        const config = plugin.config.get() ?? {};\r\n        const settings = plugin.getPluginSettings();\r\n        if (!settings.Enabled) return;\r\n        config.Enabled = { ...settings.Enabled, value: enabled };\r\n        plugin.config.set(config);\r\n\r\n        this.applyPluginState(plugin);\r\n    }\r\n\r\n    private disablePlugin(plugin: PluginBase): void {\r\n        if (this.pausedListeners.has(plugin.name)) return;\r\n\r\n        const paused = this.eventHandlers.suspendPlugin(plugin);\r\n        this.pausedListeners.set(plugin.name, paused);\r\n    }\r\n\r\n    private enablePlugin(plugin: PluginBase): void {\r\n        const paused = this.pausedListeners.get(plugin.name);\r\n        if (!paused) {\r\n            return;\r\n        }\r\n\r\n        console.warn(`Enabling plugin: ${plugin.name}`);\r\n        if (!plugin.isLoaded) {\r\n            console.warn(`Loading plugin fresh: ${plugin.name} (discarding paused listeners to avoid duplicates)`);\r\n            plugin.load();\r\n            this.pausedListeners.delete(plugin.name);\r\n            return;\r\n        }\r\n\r\n        this.eventHandlers.resumePlugin(plugin, paused);\r\n        this.pausedListeners.delete(plugin.name);\r\n    }\r\n}\r\n\r\nexport { PluginManagers };", "import {\r\n  ShutdownEvent,\r\n  StartupEvent,\r\n  System,\r\n  system,\r\n  SystemAfterEvents,\r\n  SystemBeforeEvents,\r\n  World,\r\n  world,\r\n  WorldAfterEvents,\r\n  WorldBeforeEvents,\r\n} from \"@minecraft/server\";\r\nimport {\r\n  ConfigManagers,\r\n  EventHandlers,\r\n  Logger,\r\n  PluginManagers,\r\n  SettingMenuBuilders,\r\n  type SystemBaseOptions,\r\n  type WorldEvents,\r\n} from \"@kisu/api\";\r\nimport { PlayerManagers } from \"./PlayerManagers.ts\";\r\nimport { SystemPlugin } from \"../plugins/SystemPlugin/index.ts\";\r\n// import { SystemPlugin } from \"../plugins/SystemPlugin/index.ts\";\r\n\r\nclass SystemBase {\r\n  public world: World;\r\n  public system: System;\r\n  public configManager: ConfigManagers;\r\n  public events: EventHandlers<WorldEvents>;\r\n  public pluginManagers: PluginManagers;\r\n  public logger: Logger;\r\n  public settingMenuBuilders: SettingMenuBuilders;\r\n  public playerManagers: PlayerManagers;\r\n  private options: SystemBaseOptions = {\r\n    settingItemType: \"minecraft:clock\",\r\n  };\r\n  \r\n  // Track subscribed handlers alongside their owning signal so we can unsubscribe with the same callback\r\n  private eventSubscriptions = new Map<string, { signal: { unsubscribe: (cb: (arg: unknown) => void) => void }; handler: (arg: unknown) => void }>();\r\n  private startTime: number = Date.now();\r\n\r\n  constructor(options?: SystemBaseOptions) {\r\n    this.world = world;\r\n    this.system = system;\r\n    this.events = new EventHandlers<WorldEvents>();\r\n    this.logger = new Logger(\"SYSTEM\");\r\n    this.configManager = new ConfigManagers();\r\n    this.pluginManagers = new PluginManagers(this.events, this);\r\n    this.settingMenuBuilders = new SettingMenuBuilders();\r\n    this.playerManagers = new PlayerManagers();\r\n    if (options) {\r\n      this.options = { ...this.options, ...options };\r\n    }\r\n\r\n    this.setupDynamicEventMapping();\r\n    this.initializeEvents();\r\n  }\r\n\r\n  private initializeEvents() {\r\n    this.events.on(\"AfterItemUse\", (ev) => {\r\n      if (ev.itemStack.typeId !== this.options.settingItemType) return;\r\n      this.settingMenuBuilders.settingMenu(ev.source, this.pluginManagers);\r\n    });\r\n\r\n    this.events.on(\"BeforeStartup\", (ev) => this.onStartup(ev));\r\n    this.events.on(\"BeforeShutdown\", (ev) => this.onShutdown(ev));\r\n\r\n    system.runInterval(() => {\r\n      this.events.emit(\"AfterTick\", { currentTick: system.currentTick });\r\n    });\r\n  }\r\n\r\n  private setupDynamicEventMapping() {\r\n    this.events.setSubscriptionHandlers(\r\n      (event) => this.subscribeToEvent(event),\r\n      (event) => {\r\n        this.unsubscribeFromEvent(event)\r\n      },\r\n    );\r\n  }\r\n\r\n  private subscribeToEvent(eventName: string) {\r\n    if (this.eventSubscriptions.has(eventName)) return;\r\n\r\n    const isAfter = eventName.startsWith(\"After\");\r\n    const baseEventName = eventName.replace(/^(After|Before)/, \"\");\r\n    const lowerEventName = baseEventName.charAt(0).toLowerCase() +\r\n      baseEventName.slice(1);\r\n\r\n    // Try world events first\r\n    if (isAfter && lowerEventName in world.afterEvents) {\r\n      const typedKey = lowerEventName as keyof WorldAfterEvents;\r\n      const handler = (arg: unknown) => {\r\n        this.events.emit(eventName as keyof WorldEvents, arg as WorldEvents[keyof WorldEvents]);\r\n      };\r\n      world.afterEvents[typedKey].subscribe(handler);\r\n      this.eventSubscriptions.set(eventName, { signal: world.afterEvents[typedKey], handler });\r\n    } else if (!isAfter && lowerEventName in world.beforeEvents) {\r\n      const typedKey = lowerEventName as keyof WorldBeforeEvents;\r\n      const handler = (arg: unknown) => {\r\n        this.events.emit(eventName as keyof WorldEvents, arg as WorldEvents[keyof WorldEvents]);\r\n      };\r\n      world.beforeEvents[typedKey].subscribe(handler);\r\n      this.eventSubscriptions.set(eventName, { signal: world.beforeEvents[typedKey], handler });\r\n    } // Try system events\r\n    else if (isAfter && lowerEventName in system.afterEvents) {\r\n      const typedKey = lowerEventName as keyof SystemAfterEvents;\r\n      const handler = (arg: unknown) => {\r\n        this.events.emit(eventName as keyof WorldEvents, arg as WorldEvents[keyof WorldEvents]);\r\n      };\r\n      system.afterEvents[typedKey].subscribe(handler);\r\n      this.eventSubscriptions.set(eventName, { signal: system.afterEvents[typedKey], handler });\r\n    } else if (!isAfter && lowerEventName in system.beforeEvents) {\r\n      const typedKey = lowerEventName as keyof SystemBeforeEvents;\r\n      const handler = (arg: unknown) => {\r\n        this.events.emit(eventName as keyof WorldEvents, arg as WorldEvents[keyof WorldEvents]);\r\n      };\r\n      system.beforeEvents[typedKey].subscribe(handler);\r\n      this.eventSubscriptions.set(eventName, { signal: system.beforeEvents[typedKey], handler });\r\n    }\r\n  }\r\n\r\n  private unsubscribeFromEvent(eventName: string) {\r\n    const subscription = this.eventSubscriptions.get(eventName);\r\n    if (!subscription) return;\r\n\r\n    system.run(() => subscription.signal.unsubscribe(subscription.handler));\r\n    this.eventSubscriptions.delete(eventName);\r\n  }\r\n\r\n  public onLoad(_ev: StartupEvent): void {}\r\n\r\n  private onStartup(ev: StartupEvent): void {\r\n    try {\r\n      this.onLoad(ev);\r\n    } catch (error) {\r\n      this.logger.error(`Error during onLoad: ${(error as Error)}`);\r\n    }\r\n    this.pluginManagers.registerPlugin(SystemPlugin);\r\n    const plugins = this.pluginManagers.getPlugins();\r\n    let pluginLoadCount = 0;\r\n    for (const plugin of plugins) {\r\n      try {\r\n        plugin.onEnable(ev);\r\n      } catch (error) {\r\n        this.logger.error(\r\n          `Error during onEnable of plugin ${plugin.name}: ${(error as Error)}`,\r\n        );\r\n      }\r\n      pluginLoadCount++;\r\n    }\r\n\r\n    system.run(() => {\r\n      const endTime = Date.now();\r\n      const loadDuration = endTime - this.startTime;\r\n\r\n      this.playerManagers.eachPlayer((pl) => {\r\n        pl.sendToast(\r\n          \"\",\r\n          `${\"Plugin Loaded\".mcColors().grey} (${pluginLoadCount.toString().mcColors().green}/${plugins.length.toString().mcColors().red}) ${`in ${loadDuration}ms`.mcColors().grey}`,\r\n          \"textures/items/compass_item\",\r\n          \"textures/ui/greyBorder\",\r\n        );\r\n      });\r\n    });\r\n  }\r\n\r\n  private onShutdown(ev: ShutdownEvent): void {\r\n    const plugins = this.pluginManagers.getPlugins();\r\n    for (const plugin of plugins) {\r\n      plugin.onDisable(ev);\r\n    }\r\n  }\r\n}\r\n\r\nexport { SystemBase };\r\n", "import { StartupEvent } from \"@minecraft/server\";\r\nimport { PluginBase } from \"../../class/PluginBase.ts\";\r\nimport { CommandPermissionLevel, CustomCommandParamType, CustomCommandStatus } from \"@minecraft/server\";\r\nimport { Player } from \"@minecraft/server\";\r\n\r\nclass SystemPlugin extends PluginBase {\r\n    public override isRuntime: boolean = true;\r\n    \r\n    public override onEnable(ev: StartupEvent): void {\r\n        ev.customCommandRegistry.registerEnum(\"kisu:plugin_enums\", [\r\n            \"list\",\r\n            \"settings\"\r\n        ])\r\n        ev.customCommandRegistry.registerCommand({\r\n            name: \"kisu:plugins\",\r\n            description: \"Manage plugins and their settings.\",\r\n            permissionLevel: CommandPermissionLevel.Admin,\r\n            cheatsRequired: false,\r\n            mandatoryParameters: [\r\n                {\r\n                    name: \"kisu:plugin_enums\",\r\n                    type: CustomCommandParamType.Enum\r\n                }\r\n            ]\r\n        }, (origin, args) => {\r\n            const player = origin.sourceEntity as Player;\r\n            if (!(player instanceof Player)) return { message: \"Source must be a player\", status: CustomCommandStatus.Failure }\r\n            if (args === \"list\") {\r\n                const plugins = this.systemBase.pluginManagers.getPlugins();\r\n                return { message: ` \u00A7a[Plugins List]\u00A7r\\n${plugins.map(p => ` \u00A7e- ${p.getName()} \u00A77(v${p.version})`).join(\"\\n\")}`, status: CustomCommandStatus.Success }\r\n            } else if (args === \"settings\") {\r\n                this.system.run(() => {\r\n                    this.systemBase.settingMenuBuilders.settingMenu(player, this.systemBase.pluginManagers);\r\n                })\r\n                return { status: CustomCommandStatus.Success }\r\n            }\r\n            return { message: \"404\", status: CustomCommandStatus.Failure }\r\n        })\r\n    }\r\n    public override onLoad(): void {\r\n    }\r\n}\r\n\r\nexport { SystemPlugin };", "import { Player } from \"@minecraft/server\";\r\nimport {\r\n  IActionForm,\r\n  IModalForm,\r\n  PluginBase,\r\n  PluginManagers,\r\n  type PluginSettingOptions,\r\n} from \"@kisu/api\";\r\n\r\nclass SettingMenuBuilders {\r\n  private menus = new Map<string, SettingMenu>();\r\n\r\n  public registerMenu(menu: SettingMenu, plugin: PluginBase): void {\r\n    this.menus.set(plugin.name, menu);\r\n  }\r\n\r\n  public settingMenu(pl: Player, pluginManagers: PluginManagers): void {\r\n    const plugins = pluginManagers.getPlugins();\r\n\r\n    const settingMain = new IActionForm(\r\n      `Settings Menu`,\r\n      `\u00A7fHello, \u00A7e${pl.name}\u00A7r\\n\\nThis is the configuration menu.\\nYou can manage settings here.`,\r\n    );\r\n\r\n    settingMain.addDivider();\r\n    settingMain.addLabel(`\u00A77Plugins (\u00A7c${plugins.length}\u00A77)\u00A7r`);\r\n\r\n    for (const plugin of plugins) {\r\n      if (plugin.isRuntime) continue;\r\n      this.addPluginButton(settingMain, plugin, pl, pluginManagers);\r\n    }\r\n\r\n    settingMain.show(pl);\r\n  }\r\n\r\n  private addPluginButton(\r\n    form: IActionForm,\r\n    plugin: PluginBase,\r\n    player: Player,\r\n    pluginManagers: PluginManagers,\r\n  ): void {\r\n    const settings = new SettingMenu(plugin, plugin.getPluginSettings());\r\n    const statusText = plugin.isEnabled() ? \"\u00A72Enabled\" : \"\u00A7cDisabled\";\r\n\r\n    form.addButton(\r\n      `${settings.buttons.name}\\n\u00A78[${statusText}\u00A78]`,\r\n      settings.buttons.icon,\r\n      () => {\r\n        this.showPluginSettingsPage(plugin, player, pluginManagers);\r\n      },\r\n    );\r\n  }\r\n\r\n  private showPluginSettingsPage(\r\n    plugin: PluginBase,\r\n    player: Player,\r\n    pluginManagers: PluginManagers,\r\n  ): void {\r\n    const settings = new SettingMenu(plugin, plugin.getPluginSettings());\r\n    const advancedSettings = plugin.getAdvancedSettings(player, plugin);\r\n\r\n    const showDefaultSettings = () => {\r\n      const page = settings.getPage();\r\n\r\n      page.show(player).then((res) => {\r\n        if (res.canceled) return;\r\n\r\n        this.savePluginSettings(\r\n          plugin,\r\n          res.formValues as (string | number | boolean)[],\r\n          pluginManagers,\r\n        );\r\n\r\n        this.settingMenu(player, pluginManagers);\r\n      });\r\n    }\r\n\r\n    const showAdvancedSettings = () => {\r\n      advancedSettings!();\r\n    }\r\n\r\n    if (advancedSettings) {\r\n      const settingSelectionMenu = new IActionForm(\"Settings Menu\", \"Choose an option:\");\r\n      settingSelectionMenu.addButton(\"Advanced Settings\", \"textures/ui/settings_glyph_color_2x\", () => {\r\n        showAdvancedSettings();\r\n      });\r\n      settingSelectionMenu.addButton(\"Default Settings\", \"textures/ui/icon_setting\", () => {\r\n        showDefaultSettings();\r\n      });\r\n      settingSelectionMenu.show(player);\r\n    } else {\r\n      showDefaultSettings();\r\n    }\r\n  }\r\n\r\n  private savePluginSettings(\r\n    plugin: PluginBase,\r\n    formValues: (string | number | boolean)[],\r\n    pluginManagers: PluginManagers,\r\n  ): void {\r\n    const startIndex = 2; // Skip label and divider\r\n    const config = plugin.config.get() ?? {};\r\n    const settingsKeysNone = Object.keys(plugin.getPluginSettings());\r\n    const settingsKeys = settingsKeysNone.filter(\r\n      (key) => plugin.getPluginSettings()[key]?.canUserModify !== false,\r\n    );\r\n\r\n    for (let i = startIndex; i < formValues.length - 1; i++) {\r\n      const value = formValues[i];\r\n      if (value === undefined) continue;\r\n\r\n      const key = settingsKeys[i - startIndex];\r\n      if (!key) continue;\r\n      const setting = plugin.getPluginSettings()[key];\r\n      if (!setting) continue;\r\n\r\n      config[key] = {\r\n        ...setting,\r\n        value: this.convertSettingValue(setting.type, value),\r\n      };\r\n    }\r\n\r\n    plugin.config.set(config);\r\n\r\n    pluginManagers.applyPluginState(plugin);\r\n  }\r\n\r\n  private convertSettingValue(\r\n    type: \"string\" | \"number\" | \"boolean\" | \"array\",\r\n    value: string | number | boolean,\r\n  ): string | number | boolean {\r\n    switch (type) {\r\n      case \"number\":\r\n      case \"array\":\r\n        return Number(value);\r\n      case \"boolean\":\r\n        return Boolean(value);\r\n      default:\r\n        return String(value);\r\n    }\r\n  }\r\n}\r\n\r\nclass SettingMenu {\r\n  private plugin: PluginBase;\r\n  private settings: PluginSettingOptions;\r\n\r\n  constructor(plugin: PluginBase, settings: PluginSettingOptions) {\r\n    this.plugin = plugin;\r\n    this.settings = settings;\r\n  }\r\n\r\n  get buttons() {\r\n    return {\r\n      name: this.plugin.name,\r\n      description: `Settings for ${this.plugin.name.mcColors().blue} plugin`,\r\n      icon: this.plugin.icon || \"textures/items/compass_item\",\r\n    };\r\n  }\r\n\r\n  public getPage(): IModalForm {\r\n    const config = this.plugin.config.get() ?? {};\r\n\r\n    const forms = new IModalForm(\r\n      `${this.plugin.name} Settings`,\r\n      `Save changes.`,\r\n    );\r\n\r\n    forms.addLabel(this.buttons.description.mcColors().grey);\r\n    forms.addDivider();\r\n\r\n    if (Object.keys(this.settings).length === 0) {\r\n      forms.addLabel(\"\u00A7cNo settings available for this plugin.\u00A7r\");\r\n      forms.addDivider();\r\n      return forms;\r\n    }\r\n\r\n    this.addSettingFields(forms, config);\r\n\r\n    forms.addDivider();\r\n    return forms;\r\n  }\r\n\r\n  private addSettingFields(\r\n    forms: IModalForm,\r\n    config: PluginSettingOptions,\r\n  ): void {\r\n    for (const [key, setting] of Object.entries(this.settings)) {\r\n      if (setting.canUserModify === false) continue;\r\n\r\n      const savedValue = config[key]?.value;\r\n      const defaultValue = setting.default;\r\n\r\n      switch (setting.type) {\r\n        case \"boolean\":\r\n          forms.addToggle(\r\n            key,\r\n            (savedValue ?? defaultValue) as boolean,\r\n            setting.description,\r\n          );\r\n          break;\r\n\r\n        case \"string\":\r\n          forms.addTextField(\r\n            key,\r\n            setting.description,\r\n            (savedValue ?? defaultValue) as string,\r\n            setting.description,\r\n          );\r\n          break;\r\n\r\n        case \"number\":\r\n          forms.addSlider(\r\n            key,\r\n            1,\r\n            setting.maxValue ?? 100,\r\n            1,\r\n            (savedValue ?? defaultValue) as number,\r\n            setting.description,\r\n          );\r\n          break;\r\n\r\n        case \"array\":\r\n          forms.addDropdown(\r\n            key,\r\n            (defaultValue as (string | number | boolean)[]).map(String),\r\n            typeof savedValue === \"number\" ? savedValue : 0,\r\n            setting.description,\r\n          );\r\n          break;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport { SettingMenu, SettingMenuBuilders };\r\n", "class MinecraftColors {\r\n    constructor(private str: string) {}\r\n\r\n    get grey(): string {\r\n        return `\u00A77${this.str}\u00A7r`;\r\n    }\r\n\r\n    get pink(): string {\r\n        return `\u00A7d${this.str}\u00A7r`;\r\n    }\r\n\r\n    get blackGray(): string {\r\n        return `\u00A78${this.str}\u00A7r`;\r\n    }\r\n\r\n    get darkRed(): string {\r\n        return `\u00A74${this.str}\u00A7r`;\r\n    }\r\n\r\n    get darkGreen(): string {\r\n        return `\u00A72${this.str}\u00A7r`;\r\n    }\r\n\r\n    get darkBlue(): string {\r\n        return `\u00A71${this.str}\u00A7r`;\r\n    }\r\n\r\n    get darkYellow(): string {\r\n        return `\u00A76${this.str}\u00A7r`;\r\n    }\r\n\r\n    get red(): string {\r\n        return `\u00A7c${this.str}\u00A7r`;\r\n    }\r\n\r\n    get green(): string {\r\n        return `\u00A7a${this.str}\u00A7r`;\r\n    }\r\n\r\n    get blue(): string {\r\n        return `\u00A7b${this.str}\u00A7r`;\r\n    }\r\n\r\n    get yellow(): string {\r\n        return `\u00A7e${this.str}\u00A7r`;\r\n    }\r\n\r\n    get white(): string {\r\n        return `\u00A7f${this.str}\u00A7r`;\r\n    }\r\n\r\n    get black(): string {\r\n        return `\u00A70${this.str}\u00A7r`;\r\n    }\r\n\r\n    get bold(): string {\r\n        return `\u00A7l${this.str}\u00A7r`;\r\n    }\r\n\r\n    get italic(): string {\r\n        return `\u00A7o${this.str}\u00A7r`;\r\n    }\r\n\r\n    get underline(): string {\r\n        return `\u00A7n${this.str}\u00A7r`;\r\n    }\r\n\r\n    get strikethrough(): string {\r\n        return `\u00A7m${this.str}\u00A7r`;\r\n    }\r\n\r\n    get obfuscated(): string {\r\n        return `\u00A7k${this.str}\u00A7r`;\r\n    }\r\n\r\n    get reset(): string {\r\n        return `\u00A7r${this.str}`;\r\n    }\r\n}\r\n\r\nexport { MinecraftColors };", "import { EventHandlers, PluginBase, type WorldEvents } from \"@kisu/api\";\r\n\r\nclass PluginEventHandlers {\r\n  private plugin: PluginBase;\r\n  private eventHandlers: EventHandlers<WorldEvents>;\r\n\r\n  constructor(plugin: PluginBase, eventHandlers: EventHandlers<WorldEvents>) {\r\n    this.plugin = plugin;\r\n    this.eventHandlers = eventHandlers;\r\n  }\r\n  on<K extends `Custom${string}`, T>(\r\n    event: K,\r\n    listener: (payload: T) => void,\r\n  ): void;\r\n  on<T extends keyof WorldEvents>(\r\n    event: T,\r\n    listener: (payload: WorldEvents[T]) => void,\r\n  ): void;\r\n  on(event: unknown, listener: unknown): void {\r\n    this.eventHandlers.on(this.plugin, event as keyof WorldEvents, listener as (payload: unknown) => void);\r\n  }\r\n  emit<K extends `Custom${string}`, T>(event: K, payload: T): void;\r\n  emit<T extends keyof WorldEvents>(event: T, payload: WorldEvents[T]): void;\r\n  emit(event: unknown, payload: unknown): void {\r\n    if (typeof event === 'string' && event.startsWith('Custom')) {\r\n      this.eventHandlers.emit(event as `Custom${string}`, payload);\r\n    } else {\r\n      this.eventHandlers.emit(event as keyof WorldEvents, payload as WorldEvents[keyof WorldEvents]);\r\n    }\r\n  }\r\n}\r\n\r\nexport { PluginEventHandlers };\r\n", "import { ActionFormData, ActionFormResponse } from \"@minecraft/server-ui\";\r\nimport type { IActionFormButton, IActionFormDivider, IActionFormHeader, IActionFormLabel } from \"@kisu/api\";\r\nimport { Player } from \"@minecraft/server\";\r\n\r\ntype FormElement = IActionFormButton | IActionFormDivider | IActionFormHeader | IActionFormLabel;\r\n\r\nclass IActionForm {\r\n  private title: string;\r\n  private body: string;\r\n  private elements: FormElement[] = [];\r\n  private previousForm?: (pl: Player) => void;\r\n\r\n  constructor(title: string = \"\", body: string = \"\", previousForm?: (pl: Player) => void) {\r\n    this.title = title;\r\n    this.body = body;\r\n    if (previousForm) {\r\n      this.previousForm = previousForm;\r\n    }\r\n  }\r\n\r\n  public back(pl: Player) {\r\n    if (this.previousForm) this.previousForm(pl);\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * Set the form title\r\n   */\r\n  public setTitle(title: string): this {\r\n    this.title = title;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set the form body text\r\n   */\r\n  public setBody(body: string): this {\r\n    this.body = body;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the current title\r\n   */\r\n  public getTitle(): string {\r\n    return this.title;\r\n  }\r\n\r\n  /**\r\n   * Get the current body text\r\n   */\r\n  public getBody(): string {\r\n    return this.body;\r\n  }\r\n\r\n  /**\r\n   * Add multiple buttons at once\r\n   */\r\n  public addButtons(buttons: IActionFormButton[]): this {\r\n    this.elements.push(...buttons);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a single button\r\n   */\r\n  public addButton(label: string, icon?: string, onClick?: () => void): this {\r\n    this.elements.push({ label, icon, onClick });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a button object\r\n   */\r\n  public addButtonObject(button: IActionFormButton): this {\r\n    this.elements.push(button);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all buttons from the form\r\n   */\r\n  public getButtons(): IActionFormButton[] {\r\n    return this.elements.filter(this.isButton);\r\n  }\r\n\r\n  /**\r\n   * Add a divider to separate elements\r\n   */\r\n  public addDivider(): this {\r\n    this.elements.push({ divider: true });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all dividers from the form\r\n   */\r\n  public getDividers(): IActionFormDivider[] {\r\n    return this.elements.filter(this.isDivider);\r\n  }\r\n\r\n  /**\r\n   * Add a header text\r\n   */\r\n  public addHeader(text: string): this {\r\n    this.elements.push({ text_header: text });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a header object\r\n   */\r\n  public addHeaderObject(header: IActionFormHeader): this {\r\n    this.elements.push(header);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the first header from the form\r\n   */\r\n  public getHeader(): IActionFormHeader | undefined {\r\n    return this.elements.find(this.isHeader);\r\n  }\r\n\r\n  /**\r\n   * Get all headers from the form\r\n   */\r\n  public getHeaders(): IActionFormHeader[] {\r\n    return this.elements.filter(this.isHeader);\r\n  }\r\n\r\n  /**\r\n   * Add a label text\r\n   */\r\n  public addLabel(text: string): this {\r\n    this.elements.push({ text_label: text });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a label object\r\n   */\r\n  public addLabelObject(label: IActionFormLabel): this {\r\n    this.elements.push(label);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all labels from the form\r\n   */\r\n  public getLabels(): IActionFormLabel[] {\r\n    return this.elements.filter(this.isLabel);\r\n  }\r\n\r\n  /**\r\n   * Clear all elements from the form\r\n   */\r\n  public clearElements(): this {\r\n    this.elements = [];\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the total number of elements\r\n   */\r\n  public getElementCount(): number {\r\n    return this.elements.length;\r\n  }\r\n\r\n  /**\r\n   * Check if the form has any buttons\r\n   */\r\n  public hasButtons(): boolean {\r\n    return this.getButtons().length > 0;\r\n  }\r\n\r\n  /**\r\n   * Show the form to a player\r\n   */\r\n  public async show(player: Player): Promise<ActionFormResponse> {\r\n    const form = new ActionFormData();\r\n    form.title(this.title);\r\n    if (this.body !== \"\") {\r\n      form.body(this.body);\r\n    }\r\n\r\n    // Track button indices for callback handling\r\n    let buttonIndex = 0;\r\n    const buttonCallbacks: (() => void)[] = [];\r\n\r\n    this.elements.forEach((element) => {\r\n      if (this.isDivider(element)) {\r\n        form.divider();\r\n      } else if (this.isHeader(element)) {\r\n        form.header(element.text_header);\r\n      } else if (this.isLabel(element)) {\r\n        form.label(element.text_label);\r\n      } else if (this.isButton(element)) {\r\n        form.button(element.label, element.icon);\r\n        buttonCallbacks[buttonIndex] = element.onClick || (() => {});\r\n        buttonIndex++;\r\n      }\r\n    });\r\n\r\n    try {\r\n      const response = await form.show(player);\r\n\r\n      if (!response.canceled && response.selection !== undefined) {\r\n        const callback = buttonCallbacks[response.selection];\r\n        if (callback) {\r\n          callback();\r\n        }\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error showing form:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private isButton(element: FormElement): element is IActionFormButton {\r\n    return \"label\" in element;\r\n  }\r\n\r\n  private isDivider(element: FormElement): element is IActionFormDivider {\r\n    return \"divider\" in element && element.divider === true;\r\n  }\r\n\r\n  private isHeader(element: FormElement): element is IActionFormHeader {\r\n    return \"text_header\" in element;\r\n  }\r\n\r\n  private isLabel(element: FormElement): element is IActionFormLabel {\r\n    return \"text_label\" in element;\r\n  }\r\n}\r\n\r\nexport { IActionForm };\r\n", "import { MessageFormData, MessageFormResponse } from \"@minecraft/server-ui\";\r\nimport { Player } from \"@minecraft/server\";\r\nimport type { IMessageFormButton } from \"@kisu/api\"\r\n\r\nclass IMessageForm {\r\n  private title: string;\r\n  private body: string;\r\n  private button1: IMessageFormButton | null = null;\r\n  private button2: IMessageFormButton | null = null;\r\n\r\n  constructor(title: string = \"\", body: string = \"\") {\r\n    this.title = title;\r\n    this.body = body;\r\n  }\r\n\r\n  /**\r\n   * Set the form title\r\n   */\r\n  public setTitle(title: string): this {\r\n    this.title = title;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set the form body text\r\n   */\r\n  public setBody(body: string): this {\r\n    this.body = body;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the current title\r\n   */\r\n  public getTitle(): string {\r\n    return this.title;\r\n  }\r\n\r\n  /**\r\n   * Get the current body text\r\n   */\r\n  public getBody(): string {\r\n    return this.body;\r\n  }\r\n\r\n  /**\r\n   * Set button 1 (left button)\r\n   */\r\n  public setButton1(text: string, onClick?: () => void): this {\r\n    this.button1 = { text, onClick };\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set button 1 object\r\n   */\r\n  public setButton1Object(button: IMessageFormButton): this {\r\n    this.button1 = button;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set button 2 (right button)\r\n   */\r\n  public setButton2(text: string, onClick?: () => void): this {\r\n    this.button2 = { text, onClick };\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Set button 2 object\r\n   */\r\n  public setButton2Object(button: IMessageFormButton): this {\r\n    this.button2 = button;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get button 1\r\n   */\r\n  public getButton1(): IMessageFormButton | null {\r\n    return this.button1;\r\n  }\r\n\r\n  /**\r\n   * Get button 2\r\n   */\r\n  public getButton2(): IMessageFormButton | null {\r\n    return this.button2;\r\n  }\r\n\r\n  /**\r\n   * Check if button 1 is set\r\n   */\r\n  public hasButton1(): boolean {\r\n    return this.button1 !== null;\r\n  }\r\n\r\n  /**\r\n   * Check if button 2 is set\r\n   */\r\n  public hasButton2(): boolean {\r\n    return this.button2 !== null;\r\n  }\r\n\r\n  /**\r\n   * Check if any buttons are set\r\n   */\r\n  public hasButtons(): boolean {\r\n    return this.button1 !== null || this.button2 !== null;\r\n  }\r\n\r\n  /**\r\n   * Clear all buttons\r\n   */\r\n  public clearButtons(): this {\r\n    this.button1 = null;\r\n    this.button2 = null;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Clear button 1\r\n   */\r\n  public clearButton1(): this {\r\n    this.button1 = null;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Clear button 2\r\n   */\r\n  public clearButton2(): this {\r\n    this.button2 = null;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Show the form to a player and return the response\r\n   */\r\n  public async show(player: Player): Promise<MessageFormResponse> {\r\n    const form = new MessageFormData();\r\n    form.title(this.title);\r\n    form.body(this.body);\r\n\r\n    if (this.button1) {\r\n      form.button1(this.button1.text);\r\n    }\r\n\r\n    if (this.button2) {\r\n      form.button2(this.button2.text);\r\n    }\r\n\r\n    try {\r\n      const response = await form.show(player);\r\n\r\n      // Handle button callbacks\r\n      if (!response.canceled && response.selection !== undefined) {\r\n        if (response.selection === 0 && this.button1 && this.button1.onClick) {\r\n          this.button1.onClick();\r\n        } else if (response.selection === 1 && this.button2 && this.button2.onClick) {\r\n          this.button2.onClick();\r\n        }\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error showing message form:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the form and process the results with a callback\r\n   */\r\n  public async showWithCallback(\r\n    player: Player,\r\n    callback: (selection: number | undefined, canceled: boolean) => void\r\n  ): Promise<void> {\r\n    try {\r\n      const response = await this.show(player);\r\n\r\n      if (response.canceled) {\r\n        callback(undefined, true);\r\n      } else {\r\n        callback(response.selection, false);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error in showWithCallback:\", error);\r\n      callback(undefined, true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a simple confirmation dialog\r\n   */\r\n  public static createConfirmation(\r\n    title: string,\r\n    body: string,\r\n    onConfirm?: () => void,\r\n    onCancel?: () => void\r\n  ): IMessageForm {\r\n    return new IMessageForm(title, body).setButton1(\"Cancel\", onCancel).setButton2(\"Confirm\", onConfirm);\r\n  }\r\n\r\n  /**\r\n   * Create a simple yes/no dialog\r\n   */\r\n  public static createYesNo(title: string, body: string, onYes?: () => void, onNo?: () => void): IMessageForm {\r\n    return new IMessageForm(title, body).setButton1(\"No\", onNo).setButton2(\"Yes\", onYes);\r\n  }\r\n\r\n  /**\r\n   * Create a simple OK dialog\r\n   */\r\n  public static createOK(title: string, body: string, onOK?: () => void): IMessageForm {\r\n    return new IMessageForm(title, body).setButton1(\"OK\", onOK);\r\n  }\r\n\r\n  /**\r\n   * Create a simple alert dialog\r\n   */\r\n  public static createAlert(title: string, body: string, onClose?: () => void): IMessageForm {\r\n    return new IMessageForm(title, body).setButton1(\"Close\", onClose);\r\n  }\r\n}\r\n\r\nexport { IMessageForm };\r\n", "import { ModalFormData, ModalFormResponse } from \"@minecraft/server-ui\";\r\nimport { Player } from \"@minecraft/server\";\r\nimport type { IModalFormTextField, IModalFormToggle, IModalFormSlider, IModalFormDropdown, IModalFormHeader, IModalFormLabel, IModalFormDivider } from \"@kisu/api\";\r\n\r\ntype FormElement =\r\n  | IModalFormTextField\r\n  | IModalFormToggle\r\n  | IModalFormSlider\r\n  | IModalFormDropdown\r\n  | IModalFormDivider\r\n  | IModalFormHeader\r\n  | IModalFormLabel;\r\n\r\nclass IModalForm {\r\n  private title: string;\r\n  private elements: FormElement[] = [];\r\n  private submitButtonText: string;\r\n  private callback?: (formValues: (string | number | boolean | undefined)[], canceled: boolean) => void;\r\n\r\n  constructor(title: string = \"\", submitButtonText: string = \"Submit\") {\r\n    this.title = title;\r\n    this.submitButtonText = submitButtonText;\r\n  }\r\n\r\n  /**\r\n   * Set the form title\r\n   */\r\n  public setTitle(title: string): this {\r\n    this.title = title;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the current title\r\n   */\r\n  public getTitle(): string {\r\n    return this.title;\r\n  }\r\n\r\n  /**\r\n   * Set the submit button text\r\n   */\r\n  public setSubmitButton(text: string): this {\r\n    this.submitButtonText = text;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the submit button text\r\n   */\r\n  public getSubmitButtonText(): string {\r\n    return this.submitButtonText;\r\n  }\r\n\r\n  /**\r\n   * Add a text field\r\n   */\r\n  public addTextField(label: string, placeholderText?: string, defaultValue?: string, tooltip?: string): this {\r\n    this.elements.push({ label, placeholderText, defaultValue, tooltip });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a text field object\r\n   */\r\n  public addTextFieldObject(textField: IModalFormTextField): this {\r\n    this.elements.push(textField);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all text fields from the form\r\n   */\r\n  public getTextFields(): IModalFormTextField[] {\r\n    return this.elements.filter(this.isTextField);\r\n  }\r\n\r\n  /**\r\n   * Add a toggle switch\r\n   */\r\n  public addToggle(label: string, defaultValue?: boolean, tooltip?: string): this {\r\n    this.elements.push({ label, defaultValue, tooltip });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a toggle object\r\n   */\r\n  public addToggleObject(toggle: IModalFormToggle): this {\r\n    this.elements.push(toggle);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all toggles from the form\r\n   */\r\n  public getToggles(): IModalFormToggle[] {\r\n    return this.elements.filter(this.isToggle);\r\n  }\r\n\r\n  /**\r\n   * Add a slider\r\n   */\r\n  public addSlider(\r\n    label: string,\r\n    minimumValue: number,\r\n    maximumValue: number,\r\n    valueStep: number,\r\n    defaultValue?: number,\r\n    tooltip?: string\r\n  ): this {\r\n    this.elements.push({ label, minimumValue, maximumValue, valueStep, defaultValue, tooltip });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a slider object\r\n   */\r\n  public addSliderObject(slider: IModalFormSlider): this {\r\n    this.elements.push(slider);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all sliders from the form\r\n   */\r\n  public getSliders(): IModalFormSlider[] {\r\n    return this.elements.filter(this.isSlider);\r\n  }\r\n\r\n  /**\r\n   * Add a dropdown\r\n   */\r\n  public addDropdown(label: string, options: string[], defaultValueIndex?: number, tooltip?: string): this {\r\n    this.elements.push({ label, options, defaultValueIndex, tooltip });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a dropdown object\r\n   */\r\n  public addDropdownObject(dropdown: IModalFormDropdown): this {\r\n    this.elements.push(dropdown);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all dropdowns from the form\r\n   */\r\n  public getDropdowns(): IModalFormDropdown[] {\r\n    return this.elements.filter(this.isDropdown);\r\n  }\r\n\r\n  /**\r\n   * Add a divider to separate elements\r\n   */\r\n  public addDivider(): this {\r\n    this.elements.push({ divider: true });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all dividers from the form\r\n   */\r\n  public getDividers(): IModalFormDivider[] {\r\n    return this.elements.filter(this.isDivider);\r\n  }\r\n\r\n  /**\r\n   * Add a header text\r\n   */\r\n  public addHeader(text: string): this {\r\n    this.elements.push({ text_header: text });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a header object\r\n   */\r\n  public addHeaderObject(header: IModalFormHeader): this {\r\n    this.elements.push(header);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the first header from the form\r\n   */\r\n  public getHeader(): IModalFormHeader | undefined {\r\n    return this.elements.find(this.isHeader);\r\n  }\r\n\r\n  /**\r\n   * Get all headers from the form\r\n   */\r\n  public getHeaders(): IModalFormHeader[] {\r\n    return this.elements.filter(this.isHeader);\r\n  }\r\n\r\n  /**\r\n   * Add a label text\r\n   */\r\n  public addLabel(text: string): this {\r\n    this.elements.push({ text_label: text });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Add a label object\r\n   */\r\n  public addLabelObject(label: IModalFormLabel): this {\r\n    this.elements.push(label);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get all labels from the form\r\n   */\r\n  public getLabels(): IModalFormLabel[] {\r\n    return this.elements.filter(this.isLabel);\r\n  }\r\n\r\n  /**\r\n   * Clear all elements from the form\r\n   */\r\n  public clearElements(): this {\r\n    this.elements = [];\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Get the total number of elements\r\n   */\r\n  public getElementCount(): number {\r\n    return this.elements.length;\r\n  }\r\n\r\n  /**\r\n   * Check if the form has any input elements (textField, toggle, slider, dropdown)\r\n   */\r\n  public hasInputElements(): boolean {\r\n    return this.elements.some(\r\n      (element) =>\r\n        this.isTextField(element) || this.isToggle(element) || this.isSlider(element) || this.isDropdown(element)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get all elements\r\n   */\r\n  public getElements(): FormElement[] {\r\n    return this.elements;\r\n  }\r\n\r\n  public addCallback(callback: (formValues: (string | number | boolean | undefined)[], canceled: boolean) => void): this {\r\n    this.callback = callback;\r\n    return this;\r\n  }\r\n\r\n    /**\r\n   * Show the form to a player and return the response\r\n   */\r\n  public async show(player: Player): Promise<ModalFormResponse> {\r\n    const form = new ModalFormData();\r\n    form.title(this.title);\r\n    form.submitButton(this.submitButtonText);\r\n\r\n    this.elements.forEach((element) => {\r\n      if (this.isDivider(element)) {\r\n        form.divider();\r\n      } else if (this.isHeader(element)) {\r\n        // Note: ModalFormData doesn't have a header method, incorporating into divider or label\r\n        form.label(element.text_header);\r\n      } else if (this.isLabel(element)) {\r\n        form.label(element.text_label);\r\n      } else if (this.isTextField(element)) {\r\n        form.textField(element.label, element.placeholderText || \"\", { defaultValue: element.defaultValue || \"\", tooltip: element.tooltip });\r\n      } else if (this.isToggle(element)) {\r\n        form.toggle(element.label, { defaultValue: element.defaultValue || false, tooltip: element.tooltip });\r\n      } else if (this.isSlider(element)) {\r\n        form.slider(element.label, element.minimumValue, element.maximumValue, {\r\n          defaultValue: element.defaultValue || 0,\r\n          valueStep: element.valueStep,\r\n          tooltip: element.tooltip,\r\n        });\r\n      } else if (this.isDropdown(element)) {\r\n        form.dropdown(element.label, element.options, { defaultValueIndex: element.defaultValueIndex || 0, tooltip: element.tooltip });\r\n      }\r\n    });\r\n\r\n    try {\r\n      const response = await form.show(player);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error showing modal form:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show the form and process the results with a callback\r\n   */\r\n  public async showWithCallback(player: Player): Promise<void> {\r\n    try {\r\n      const response = await this.show(player);\r\n\r\n      if (response.canceled) {\r\n        this.callback?.([], true);\r\n      } else {\r\n        this.callback?.(response.formValues || [], false);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error in showWithCallback:\", error);\r\n      this.callback?.([], true);\r\n    }\r\n  }\r\n\r\n  // Type guard methods for better type safety\r\n  private isTextField(element: FormElement): element is IModalFormTextField {\r\n    return \"label\" in element && \"placeholderText\" in element;\r\n  }\r\n\r\n  private isToggle(element: FormElement): element is IModalFormToggle {\r\n    return \"label\" in element && \"defaultValue\" in element && typeof (element).defaultValue === \"boolean\";\r\n  }\r\n\r\n  private isSlider(element: FormElement): element is IModalFormSlider {\r\n    return \"minimumValue\" in element && \"maximumValue\" in element && \"valueStep\" in element;\r\n  }\r\n\r\n  private isDropdown(element: FormElement): element is IModalFormDropdown {\r\n    return \"options\" in element && Array.isArray((element).options);\r\n  }\r\n\r\n  private isDivider(element: FormElement): element is IModalFormDivider {\r\n    return \"divider\" in element && element.divider === true;\r\n  }\r\n\r\n  private isHeader(element: FormElement): element is IModalFormHeader {\r\n    return \"text_header\" in element;\r\n  }\r\n\r\n  private isLabel(element: FormElement): element is IModalFormLabel {\r\n    return \"text_label\" in element;\r\n  }\r\n}\r\n\r\nexport { IModalForm };\r\n", "import { MinecraftColors } from \"../class/MinecraftColors.ts\";\r\n\r\ndeclare global {\r\n  interface String {\r\n    mcColors(): MinecraftColors;\r\n  }\r\n}\r\n\r\nString.prototype.mcColors = function (): MinecraftColors {\r\n  return new MinecraftColors(this.toString());\r\n};\r\n", "import { Player } from \"@minecraft/server\";\r\n\r\ndeclare global {\r\n  interface Player {\r\n    sendToast(title?: string, message?: string, icon?: string, background?: string): void;\r\n    sendTopbar(message: string): void;\r\n    stopTopbar(): void;\r\n  }\r\n}\r\n\r\nfunction adjustTextLength(text = \"\", totalLength = 100) {\r\n  return (text.slice(0, totalLength)).padEnd(totalLength, \"\\t\");\r\n}\r\n\r\nPlayer.prototype.sendToast = function (title: string = \"\", message: string = \"\", icon: string = \"\", background: string = \"textures/ui/greyBorder\"): void {\r\n  const text = \"\u00A7N\u00A7O\u00A7T\u00A7I\u00A7F\u00A7I\u00A7C\u00A7A\u00A7T\u00A7I\u00A7O\u00A7N\" + adjustTextLength(title, 100) + adjustTextLength('\u00A77' + message, 600) + adjustTextLength(icon, 200) + adjustTextLength(background, 200)\r\n  this.sendMessage(text);\r\n  this.playSound(\"note.harp\", { volume: 0.6, pitch: 1.5 });\r\n  return;\r\n};\r\n\r\nPlayer.prototype.sendTopbar = function (message: string): void {\r\n  this.onScreenDisplay.setTitle(\"\u00A7m\u00A7c\" + message);\r\n  return;\r\n}\r\n\r\nPlayer.prototype.stopTopbar = function (): void {\r\n  this.onScreenDisplay.setTitle(\"\u00A7m\u00A7c\");\r\n  return;\r\n}\r\n\r\nPlayer.prototype.sendBottomBar = function (message: string): void {\r\n  this.onScreenDisplay.setTitle(\"\u00A7m\u00A7e\" + message);\r\n  return;\r\n}\r\n\r\nPlayer.prototype.stopBottomBar = function (): void {\r\n  this.onScreenDisplay.setTitle(\"\u00A7m\u00A7e\");\r\n  return;\r\n}"],
  "mappings": "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",
  "names": ["world", "ConfigManagers", "name", "Config", "properties", "key", "value", "serialized", "partIndex", "offset", "chunk", "partPrefix", "partKeys", "id", "a", "b", "aIndex", "bIndex", "raw", "parts", "keys", "system", "EventHandlers", "onSubscribe", "onUnsubscribe", "event", "list", "args", "callback", "owner", "listeners", "hadListeners", "keep", "ownedMatch", "cbMatch", "payload", "listener", "stored", "collect", "owned", "callbacks", "cb", "Logger", "prefix", "message", "type", "system", "world", "world", "PlayerManagers", "callback", "players", "player", "name", "gameMode", "ItemActionRegistry", "ItemActionManager", "plugin", "itemId", "itemActions", "ItemActions", "callback", "ev", "player", "items", "PluginBase", "events", "systemBase", "PluginEventHandlers", "world", "system", "SettingMenu", "PlayerManagers", "ItemActionManager", "Logger", "_ev", "enabledSetting", "menu", "_pl", "_plugin", "config", "pluginSettings", "configUnUsedKeys", "key", "setting", "system", "PluginManagers", "event", "plugin", "p", "instance", "name", "enabled", "config", "settings", "paused", "system", "world", "CommandPermissionLevel", "CustomCommandParamType", "CustomCommandStatus", "Player", "SystemPlugin", "PluginBase", "ev", "origin", "args", "player", "p", "SystemBase", "options", "world", "system", "EventHandlers", "Logger", "ConfigManagers", "PluginManagers", "SettingMenuBuilders", "PlayerManagers", "ev", "event", "eventName", "isAfter", "baseEventName", "lowerEventName", "typedKey", "handler", "arg", "subscription", "_ev", "error", "SystemPlugin", "plugins", "pluginLoadCount", "plugin", "loadDuration", "pl", "SettingMenuBuilders", "menu", "plugin", "pl", "pluginManagers", "plugins", "settingMain", "IActionForm", "form", "player", "settings", "SettingMenu", "statusText", "advancedSettings", "showDefaultSettings", "res", "showAdvancedSettings", "settingSelectionMenu", "formValues", "config", "settingsKeys", "key", "i", "value", "setting", "type", "forms", "IModalForm", "savedValue", "defaultValue", "MinecraftColors", "str", "PluginEventHandlers", "plugin", "eventHandlers", "event", "listener", "payload", "ActionFormData", "IActionForm", "title", "body", "previousForm", "pl", "buttons", "label", "icon", "onClick", "button", "text", "header", "player", "form", "buttonIndex", "buttonCallbacks", "element", "response", "callback", "error", "MessageFormData", "IMessageForm", "_IMessageForm", "title", "body", "text", "onClick", "button", "player", "form", "response", "error", "callback", "onConfirm", "onCancel", "onYes", "onNo", "onOK", "onClose", "ModalFormData", "IModalForm", "title", "submitButtonText", "text", "label", "placeholderText", "defaultValue", "tooltip", "textField", "toggle", "minimumValue", "maximumValue", "valueStep", "slider", "options", "defaultValueIndex", "dropdown", "header", "element", "callback", "player", "form", "error", "response", "MinecraftColors", "Player", "adjustTextLength", "text", "totalLength", "title", "message", "icon", "background"]
}
